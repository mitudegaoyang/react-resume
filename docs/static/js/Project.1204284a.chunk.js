(this.webpackJsonpreact_antd_admin_template=this.webpackJsonpreact_antd_admin_template||[]).push([[27],{1396:function(e,t,a){"use strict";a.r(t);a(575);var n=a(610),l=(a(490),a(489)),c=(a(850),a(1375)),r=(a(239),a(178)),o=(a(255),a(213)),i=(a(89),a(28)),s=(a(519),a(518)),u=(a(238),a(71)),m=(a(237),a(143)),d=(a(70),a(6)),b=(a(142),a(50)),f=a(17),p=a(42),h=a(43),g=a(56),y=a(55),E=(a(549),a(574)),v=a(38);function j(e){return Object(v.a)({url:"/project/list",method:"post",data:e})}function w(e){return Object(v.a)({url:"/project/delete",method:"post",data:e})}function C(e){return Object(v.a)({url:"/project/edit",method:"post",data:e})}a(177);var k=a(107),O=a(48),S=a(0),x=a.n(S),M=a(576),D=a.n(M),Q=a(577);function N(e){var t=e.label,a=e.type,n=e.onClick,l=e.iconStyle,c=void 0===l?{}:l,r=e.disabled,o={type:"swap-rotate"===a?"swap":a,style:Object(f.a)({},c,{},"swap-rotate"===a?{transform:"rotate(90deg)"}:{})};return x.a.createElement(i.a,{style:{border:"none",padding:"5px 8px"},title:t,onClick:n,disabled:r},x.a.createElement(d.a,o))}var _=function(e){var t=e.onStateChange,a=e.visible,n=e.src,l=e.canDownload,c=Object(S.useState)(100),r=Object(O.a)(c,2),o=r[0],i=r[1],s=Object(S.useState)(0),u=Object(O.a)(s,2),m=u[0],d=u[1],b=Object(S.useState)(!1),f=Object(O.a)(b,2),p=f[0],h=f[1],g=Object(S.useState)(!1),y=Object(O.a)(g,2),E=y[0],v=y[1],j=Object(S.useCallback)((function(){i((function(e){return Math.min(e+5,300)}))}),[]),w=Object(S.useCallback)((function(){i((function(e){return Math.max(e-5,50)}))}),[]),C=function(){var e=Object(Q.a)(D.a.mark((function e(){var t,a,l,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.next=5,t.blob();case 5:a=e.sent,l=URL.createObjectURL(a),(c=document.createElement("a")).href=l,c.download="image.jpg",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=Object(S.useCallback)((function(){i(100),d(0),h(!1),v(!1)}),[]);return Object(S.useEffect)((function(){a||k()}),[a]),Object(S.useEffect)((function(){t(function(){var e="scale(".concat(o/100,")"),t="rotate(".concat(m,"deg)"),a=p?"scaleX(-1)":"scaleX(1)",n=E?"scaleY(-1)":"scaleY(1)";return"".concat(e," ").concat(t," ").concat(a," ").concat(n)}())}),[o,m,p,E]),x.a.createElement("div",{style:{margin:"0 auto",textAlign:"center"}},x.a.createElement(N,{label:"\u653e\u5927",type:"zoom-in",onClick:j,disabled:300===o}),x.a.createElement(N,{label:"\u7f29\u5c0f",type:"zoom-out",onClick:w,disabled:50===o}),x.a.createElement(N,{label:"\u4e0a\u4e0b\u7ffb\u8f6c",type:"swap-rotate",onClick:function(){v(!E)}}),x.a.createElement(N,{label:"\u5de6\u53f3\u7ffb\u8f6c",type:"swap",onClick:function(){h(!p)}}),x.a.createElement(N,{label:"\u5de6\u65cb\u8f6c",type:"left",onClick:function(){d((m-90)%360)}}),x.a.createElement(N,{label:"\u53f3\u65cb\u8f6c",type:"right",onClick:function(){d((m+90)%360)}}),l&&x.a.createElement(N,{label:"\u4e0b\u8f7d",type:"download",onClick:C}))},z=(a(853),function(e){var t=e.src,a=e.alt,n=e.canDownload,l=e.width,c=void 0===l?300:l,r=Object(S.useState)(!1),o=Object(O.a)(r,2),i=o[0],s=o[1],u=Object(S.useState)(""),m=Object(O.a)(u,2),b=m[0],f=m[1],p=function(){return s(!i)};return x.a.createElement("div",{className:"imagePreview-container"},x.a.createElement("div",{className:"imagePreview-image-container"},x.a.createElement("div",{className:"imagePreview-image-mask",onClick:p},x.a.createElement(d.a,{type:"eye",title:"\u9884\u89c8"})," \u9884\u89c8"),x.a.createElement("img",{width:c,src:t,alt:a})),x.a.createElement(k.a,{title:"\u56fe\u7247\u9884\u89c8",visible:i,onCancel:p,style:{top:0,maxWidth:"100vw",paddingBottom:0},bodyStyle:{height:"calc(100vh - 118px)",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",padding:0},width:"100vw",footer:x.a.createElement(_,{onStateChange:function(e){f(e)},visible:i,src:t,canDownload:n})},x.a.createElement("img",{alt:a,src:t,style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"calc(100vh - 158px)",position:"relative",margin:"0 auto",transform:b}})))}),I=(a(854),E.a.Panel),L={active:{label:"\u5185\u7f51\u4e0a\u7ebf",color:"blue"},published:{label:"\u5df2\u4e0a\u7ebf",color:"green"},close:{label:"\u5df2\u4e0b\u7ebf",color:""}},P={react:{label:"React",color:"#61dafb"},vue:{label:"Vue",color:"#4fc08d"},uniApp:{label:"uni-app",color:"#42b983"},uniCloud:{label:"uni-cloud",color:"#e96900"},weChat:{label:"WeChat",color:"#2bae67"},antd:{label:"antd",color:"#0170fe"},iView:{label:"iView",color:"#2d8cf0"},vux:{label:"Vux",color:"#35495e"},elementUI:{label:"ElementUI",color:"#409efe"},vueElementAdmin:{label:"vue-element-admin",color:"#4caf50"},weex:{label:"Weex",color:"#3aabf4"},singleSpa:{label:"single-spa",color:"#ee689f"},ice:{label:"ice",color:"#6047de"},echarts:{label:"echarts",color:"#e43961"},cloudCharts:{label:"cloud-charts",color:"#ff8200"},formilyjs:{label:"formilyjs",color:"#4d1db5"},html:{label:"HTML5",color:"#f60"},css:{label:"CSS3",color:"#f90"},js:{label:"js",color:"#ffda3f"},jsp:{label:"JSP",color:"#2952a4"},angular:{label:"angular",color:"#eb5a5c"},fuse:{label:"Fuse-angular",color:"#2877c1"},emotion:{label:"emotion",color:"#c43bad"},tggLargeScreen:{label:"tgg-large-screen",color:"#612aaa"}},R=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l)))._isMounted=!1,e.state={list:[],loading:!1,total:0,listQuery:{pageNumber:1,pageSize:10,title:"",star:"",status:""},editModalVisible:!1,editModalLoading:!1,currentRowData:{id:0,author:"",date:"",readings:0,star:"\u2605",status:"published",title:""}},e.fetchData=function(){e.setState({loading:!0}),j(e.state.listQuery).then((function(t){e.setState({loading:!1});var a=t.data.data.items,n=t.data.data.total;e._isMounted&&e.setState({list:a,total:n})}))},e.filterTitleChange=function(t){var a=t.target.value;e.setState((function(e){return{listQuery:Object(f.a)({},e.listQuery,{title:a})}}))},e.filterStatusChange=function(t){e.setState((function(e){return{listQuery:Object(f.a)({},e.listQuery,{status:t})}}))},e.filterTagsChange=function(t){e.setState((function(e){return{listQuery:Object(f.a)({},e.listQuery,{tags:t})}}))},e.changePage=function(t,a){e.setState((function(e){return{listQuery:Object(f.a)({},e.listQuery,{pageNumber:t})}}),(function(){e.fetchData()}))},e.changePageSize=function(t,a){e.setState((function(e){return{listQuery:Object(f.a)({},e.listQuery,{pageNumber:1,pageSize:a})}}),(function(){e.fetchData()}))},e.handleDelete=function(t){w({id:t.id}).then((function(t){b.a.success("\u5220\u9664\u6210\u529f"),e.fetchData()}))},e.handleEdit=function(t){e.setState({currentRowData:Object.assign({},t),editModalVisible:!0})},e.handleOk=function(t){var a=e.formRef.props.form;a.validateFields((function(t,n){if(!t){var l=Object(f.a)({},n,{star:"".padStart(n.star,"\u2605"),date:n.date.format("YYYY-MM-DD HH:mm:ss")});e.setState({editModalLoading:!0}),C(l).then((function(t){a.resetFields(),e.setState({editModalVisible:!1,editModalLoading:!1}),b.a.success("\u7f16\u8f91\u6210\u529f!"),e.fetchData()})).catch((function(e){b.a.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))}}))},e.handleCancel=function(t){e.setState({editModalVisible:!1})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.fetchData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=function(e){var t=e.type,a=e.text;return x.a.createElement("span",null,x.a.createElement(d.a,{type:t,style:{marginRight:8}}),a)};return x.a.createElement("div",{className:"app-container project-container"},x.a.createElement(E.a,{defaultActiveKey:["1"]},x.a.createElement(I,{header:"\u7b5b\u9009",key:"1"},x.a.createElement(u.a,{layout:"inline"},x.a.createElement(u.a.Item,{label:"\u6807\u9898:"},x.a.createElement(m.a,{onChange:this.filterTitleChange,allowClear:!0,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"})),x.a.createElement(u.a.Item,{label:"\u6807\u7b7e:"},x.a.createElement(s.a,{style:{width:220},onChange:this.filterTagsChange,allowClear:!0,placeholder:"\u8bf7\u9009\u62e9\u6807\u7b7e"},Object.keys(P).map((function(e){return x.a.createElement(s.a.Option,{value:e,key:e},P[e].label)})))),x.a.createElement(u.a.Item,{label:"\u72b6\u6001:"},x.a.createElement(s.a,{style:{width:120},onChange:this.filterStatusChange,allowClear:!0,placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001"},Object.keys(L).map((function(e){return x.a.createElement(s.a.Option,{value:e,key:e},L[e].label)})))),x.a.createElement(u.a.Item,null,x.a.createElement(i.a,{type:"primary",icon:"search",onClick:this.fetchData},"\u641c\u7d22"))))),x.a.createElement("br",null),x.a.createElement(l.a,null,x.a.createElement(c.a,{itemLayout:"vertical",size:"large",pagination:!1,dataSource:this.state.list,loading:this.state.loading,renderItem:function(t){return x.a.createElement(c.a.Item,{key:t.title,actions:[x.a.createElement(e,{type:"star-o",text:"156",key:"list-vertical-star-o"}),x.a.createElement(e,{type:"like-o",text:"156",key:"list-vertical-like-o"}),x.a.createElement(e,{type:"message",text:"2",key:"list-vertical-message"})],extra:t.img&&x.a.createElement(z,{key:t.title,width:272,alt:"logo",src:t.img})},x.a.createElement(c.a.Item.Meta,{avatar:t.company.src?x.a.createElement(o.a,{src:t.company.src}):x.a.createElement(o.a,{style:{backgroundColor:t.company.color,verticalAlign:"middle",opacity:.8},src:t.company.src},t.company.name),title:x.a.createElement(x.a.Fragment,null,t.href?x.a.createElement("a",{href:t.href,target:"_blank"},t.title):x.a.createElement("span",null,t.title),x.a.createElement("span",{className:"status-wrapper"}," (",L[t.status].label,")")),description:x.a.createElement(x.a.Fragment,null,t.tags.map((function(e){return x.a.createElement(r.a,{color:P[e].color,key:e},P[e].label)})),x.a.createElement("span",{className:"date-wrapper"},t.date))}),t.description.map((function(e,t){return x.a.createElement("p",{key:t},e)})),x.a.createElement("ul",{className:"content-wrapper"},t.content.map((function(e,t){return x.a.createElement("li",{key:t},e)}))))}})),x.a.createElement("br",null),x.a.createElement(n.a,{total:this.state.total,pageSizeOptions:["10","20","40"],showTotal:function(e){return"\u5171".concat(e,"\u6761\u6570\u636e")},onChange:this.changePage,current:this.state.listQuery.pageNumber,onShowSizeChange:this.changePageSize,showSizeChanger:!0,showQuickJumper:!0,hideOnSinglePage:!1}))}}]),a}(S.Component);t.default=R},853:function(e,t,a){},854:function(e,t,a){}}]);